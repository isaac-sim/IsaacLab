

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Find How Many/What Cameras You Should Train With &#8212; Isaac Lab Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/opt/hostedtoolcache/Python/3.10.16/x64/lib/python3.10/site-packages/sphinxcontrib/icon/node_modules/@fortawesome/fontawesome-free/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="/opt/hostedtoolcache/Python/3.10.16/x64/lib/python3.10/site-packages/sphinxcontrib/icon/node_modules/@fortawesome/fontawesome-free/js/all.min.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'source/how-to/estimate_how_many_cameras_can_run';</script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Creating Visualization Markers" href="draw_markers.html" />
    <link rel="prev" title="Saving rendered images and 3D re-projection" href="save_camera_output.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.4.1" />
    <meta name="docbuild:last-update" content="Feb 02, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/NVIDIA-logo-white.png" class="logo__image only-light" alt=""/>
    <img src="../../_static/NVIDIA-logo-black.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">Isaac Lab Documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">
<nav class="bd-links bd-docs-nav">
    <div class="bd-toc-item navbar-nav">
      <ul class="nav bd-sidenav">
        <li class="toctree-l1 has-children" style="display: flex; justify-content: center; align-items: center; flex-direction: column;">
          <div  style ="text-align:center;">
            <label for="version-select" style="font-weight: bold; display: block;">Version</label>
          </div>
          <select id="version-select" class="version-dropdown" style="margin: 0 auto; display: block;" onchange="location = this.value;">
            <option value="../../../main/source/how-to/estimate_how_many_cameras_can_run.html" >main</option>
            <option value="../../../v2.0.0/source/how-to/estimate_how_many_cameras_can_run.html" >v2.0.0</option>
            <option value="estimate_how_many_cameras_can_run.html" selected>v1.4.1</option>
            <option value="../../../v1.4.0/source/how-to/estimate_how_many_cameras_can_run.html" >v1.4.0</option>
            <option value="../../../v1.3.0/source/how-to/estimate_how_many_cameras_can_run.html" >v1.3.0</option>
            <option value="../../../v1.2.0/index.html" >v1.2.0</option>
            <option value="../../../v1.1.0/index.html" >v1.1.0</option>
            <option value="../../../v1.0.0/index.html" >v1.0.0</option>
          </select>
        </li>
      </ul>
    </div>
</nav>
</div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Quick Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/isaac-sim/IsaacLab" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://developer.nvidia.com/isaac-sim" title="Isaac Sim" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/badge/IsaacSim-4.5.0-silver.svg" class="icon-link-image" alt="Isaac Sim"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://img.shields.io/github/stars/isaac-sim/IsaacLab?color=fedcba" title="Stars" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/github/stars/isaac-sim/IsaacLab?color=fedcba" class="icon-link-image" alt="Stars"/></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../setup/ecosystem.html">Isaac Lab Ecosystem</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../setup/installation/index.html">Local Installation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../setup/installation/pip_installation.html">Pip installation (recommended for Ubuntu 22.04 and Windows)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup/installation/binaries_installation.html">Binary installation (recommended for Ubuntu 20.04)</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/installation/cloud_installation.html">Running Isaac Lab in the Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/faq.html">Frequently Asked Questions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/developer-guide/index.html">Developer’s Guide</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/developer-guide/vs_code.html">Setting up Visual Studio Code</a></li>

<li class="toctree-l2"><a class="reference internal" href="../overview/developer-guide/repo_structure.html">Repository organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/developer-guide/development.html">Application Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/developer-guide/template.html">Building your Own Project</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/core-concepts/index.html">Core Concepts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/core-concepts/task_workflows.html">Task Design Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/core-concepts/actuators.html">Actuators</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/sensors/index.html">Sensors</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/sensors/camera.html">Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/sensors/contact_sensor.html">Contact Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/sensors/frame_transformer.html">Frame Transformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/sensors/imu.html">Inertial Measurement Unit (IMU)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/sensors/ray_caster.html">Ray Caster</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/environments.html">Available Environments</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/reinforcement-learning/index.html">Reinforcement Learning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/reinforcement-learning/rl_existing_scripts.html">Reinforcement Learning Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/reinforcement-learning/rl_frameworks.html">Reinforcement Learning Library Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/reinforcement-learning/performance_benchmarks.html">Performance Benchmarks</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/teleop_imitation.html">Teleoperation and Imitation Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/showroom.html">Showroom Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/simple_agents.html">Simple Agents</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../features/hydra.html">Hydra Configuration System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/multi_gpu.html">Multi-GPU and Multi-Node Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/sensors/camera.html">Tiled Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/ray.html">Ray Job Dispatch and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/reproducibility.html">Reproducibility and Determinism</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/00_sim/create_empty.html">Creating an empty scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/00_sim/spawn_prims.html">Spawning prims into the scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/00_sim/launch_app.html">Deep-dive into AppLauncher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/01_assets/run_rigid_object.html">Interacting with a rigid object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/01_assets/run_articulation.html">Interacting with an articulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/01_assets/run_deformable_object.html">Interacting with a deformable object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/02_scene/create_scene.html">Using the Interactive Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_envs/create_manager_base_env.html">Creating a Manager-Based Base Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_envs/create_manager_rl_env.html">Creating a Manager-Based RL Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_envs/create_direct_rl_env.html">Creating a Direct Workflow RL Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_envs/register_rl_env_gym.html">Registering an Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_envs/run_rl_training.html">Training with an RL Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/03_envs/modify_direct_rl_env.html">Modifying an existing Direct RL Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/04_sensors/add_sensors_on_robot.html">Adding sensors on a robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/05_controllers/run_diff_ik.html">Using a task-space controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/05_controllers/run_osc.html">Using an operational space controller</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">How-to Guides</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="import_new_asset.html">Importing a New Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_articulation_cfg.html">Writing an Asset Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_fixed_prim.html">Making a physics prim fixed in the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_asset_spawning.html">Spawning Multiple Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="save_camera_output.html">Saving rendered images and 3D re-projection</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Find How Many/What Cameras You Should Train With</a></li>
<li class="toctree-l2"><a class="reference internal" href="draw_markers.html">Creating Visualization Markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="wrap_rl_env.html">Wrapping environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="add_own_library.html">Adding your own learning library</a></li>
<li class="toctree-l2"><a class="reference internal" href="record_animation.html">Recording Animations of Simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="record_video.html">Recording video clips during training</a></li>
<li class="toctree-l2"><a class="reference internal" href="master_omniverse.html">Mastering Omniverse for Robotics</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../deployment/index.html">Container Deployment</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../deployment/docker.html">Docker Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deployment/cluster.html">Cluster Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deployment/run_docker_example.html">Running an example with Docker</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Migration Guides</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../migration/migrating_from_isaacgymenvs.html">From IsaacGymEnvs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/migrating_from_omniisaacgymenvs.html">From OmniIsaacGymEnvs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/migrating_from_orbit.html">From Orbit</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Source API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.app.html">omni.isaac.lab.app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.actuators.html">omni.isaac.lab.actuators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.assets.html">omni.isaac.lab.assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.controllers.html">omni.isaac.lab.controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.devices.html">omni.isaac.lab.devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.envs.html">omni.isaac.lab.envs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.managers.html">omni.isaac.lab.managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.markers.html">omni.isaac.lab.markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.scene.html">omni.isaac.lab.scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.sensors.html">omni.isaac.lab.sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.sim.html">omni.isaac.lab.sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.terrains.html">omni.isaac.lab.terrains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.utils.html">omni.isaac.lab.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.envs.mdp.html">omni.isaac.lab.envs.mdp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.envs.ui.html">omni.isaac.lab.envs.ui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.sensors.patterns.html">omni.isaac.lab.sensors.patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.sim.converters.html">omni.isaac.lab.sim.converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.sim.schemas.html">omni.isaac.lab.sim.schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab/omni.isaac.lab.sim.spawners.html">omni.isaac.lab.sim.spawners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab_tasks/omni.isaac.lab_tasks.utils.html">omni.isaac.lab_tasks.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab_tasks/omni.isaac.lab_tasks.utils.wrappers.html">omni.isaac.lab_tasks.utils.wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/lab_tasks/omni.isaac.lab_tasks.utils.data_collector.html">omni.isaac.lab_tasks.utils.data_collector</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../refs/reference_architecture/index.html">Reference Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/additional_resources.html">Additional Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/contributing.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/troubleshooting.html">Tricks and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/changelog.html">Extensions Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/bibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Project Links</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/isaac-sim/IsaacLab">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.omniverse.nvidia.com/isaacsim/latest/index.html">NVIDIA Isaac Sim</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nvidia-omniverse.github.io/PhysX/physx/5.4.1/index.html">NVIDIA PhysX</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/isaac-sim/IsaacLab" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/isaac-sim/IsaacLab/edit/main/source/how-to/estimate_how_many_cameras_can_run.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/isaac-sim/IsaacLab/issues/new?title=Issue%20on%20page%20%2Fsource/how-to/estimate_how_many_cameras_can_run.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/source/how-to/estimate_how_many_cameras_can_run.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Find How Many/What Cameras You Should Train With</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-parameters">Possible Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-performance-in-task-environments-and-automatically-determine-task-max-camera-count">Compare Performance in Task Environments and Automatically Determine Task Max Camera Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-camera-type-and-performance-without-a-specified-task">Compare Camera Type and Performance (Without a Specified Task)</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="find-how-many-what-cameras-you-should-train-with">
<span id="how-to-estimate-how-cameras-can-run"></span><h1>Find How Many/What Cameras You Should Train With<a class="headerlink" href="#find-how-many-what-cameras-you-should-train-with" title="Permalink to this heading">#</a></h1>
<p>Currently in Isaac Lab, there are several camera types; USD Cameras (standard), Tiled Cameras,
and Ray Caster cameras. These camera types differ in functionality and performance. The <code class="docutils literal notranslate"><span class="pre">benchmark_cameras.py</span></code>
script can be used to understand the difference in cameras types, as well to characterize their relative performance
at different parameters such as camera quantity, image dimensions, and data types.</p>
<p>This utility is provided so that one easily can find the camera type/parameters that are the most performant
while meeting the requirements of the user’s scenario. This utility also helps estimate
the maximum number of cameras one can realistically run, assuming that one wants to maximize the number
of environments while minimizing step time.</p>
<p>This utility can inject cameras into an existing task from the gym registry,
which can be useful for benchmarking cameras in a specific scenario. Also,
if you install <code class="docutils literal notranslate"><span class="pre">pynvml</span></code>, you can let this utility automatically find the maximum
numbers of cameras that can run in your task environment up to a
certain specified system resource utilization threshold (without training; taking zero actions
at each timestep).</p>
<p>This guide accompanies the <code class="docutils literal notranslate"><span class="pre">benchmark_cameras.py</span></code> script in the <code class="docutils literal notranslate"><span class="pre">source/standalone/benchmarks</span></code>
directory.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"></path></svg></span><span class="sd-summary-text">Code for benchmark_cameras.py</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Copyright (c) 2022-2025, The Isaac Lab Project Developers.</span>
<span class="linenos">  2</span><span class="c1"># All rights reserved.</span>
<span class="linenos">  3</span><span class="c1">#</span>
<span class="linenos">  4</span><span class="c1"># SPDX-License-Identifier: BSD-3-Clause</span>
<span class="linenos">  5</span>
<span class="linenos">  6</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  7</span><span class="sd">This script might help you determine how many cameras your system can realistically run</span>
<span class="linenos">  8</span><span class="sd">at different desired settings.</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="sd">You can supply different task environments to inject cameras into, or just test a sample scene.</span>
<span class="linenos"> 11</span><span class="sd">Additionally, you can automatically find the maximum amount of cameras you can run a task with</span>
<span class="linenos"> 12</span><span class="sd">through the auto-tune functionality.</span>
<span class="linenos"> 13</span>
<span class="linenos"> 14</span><span class="sd">.. code-block:: bash</span>
<span class="linenos"> 15</span>
<span class="linenos"> 16</span><span class="sd">    # Usage with GUI</span>
<span class="linenos"> 17</span><span class="sd">    ./isaaclab.sh -p source/standalone/benchmarks/benchmark_cameras.py -h</span>
<span class="linenos"> 18</span>
<span class="linenos"> 19</span><span class="sd">    # Usage with headless</span>
<span class="linenos"> 20</span><span class="sd">    ./isaaclab.sh -p source/standalone/benchmarks/benchmark_cameras.py -h --headless</span>
<span class="linenos"> 21</span>
<span class="linenos"> 22</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span><span class="sd">&quot;&quot;&quot;Launch Isaac Sim Simulator first.&quot;&quot;&quot;</span>
<span class="linenos"> 25</span>
<span class="linenos"> 26</span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="linenos"> 27</span><span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.lab.app</span><span class="w"> </span><span class="kn">import</span> <span class="n">AppLauncher</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="c1"># parse the arguments</span>
<span class="linenos"> 32</span><span class="n">args_cli</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;This script can help you benchmark how many cameras you could run.&quot;</span><span class="p">)</span>
<span class="linenos"> 35</span>
<span class="linenos"> 36</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 37</span><span class="sd">The following arguments only need to be supplied for when one wishes</span>
<span class="linenos"> 38</span><span class="sd">to try injecting cameras into their environment, and automatically determining</span>
<span class="linenos"> 39</span><span class="sd">the maximum camera count.</span>
<span class="linenos"> 40</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 41</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 42</span>    <span class="s2">&quot;--task&quot;</span><span class="p">,</span>
<span class="linenos"> 43</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<span class="linenos"> 44</span>    <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 45</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos"> 46</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Supply this argument to spawn cameras within an known manager-based task environment.&quot;</span><span class="p">,</span>
<span class="linenos"> 47</span><span class="p">)</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 50</span>    <span class="s2">&quot;--autotune&quot;</span><span class="p">,</span>
<span class="linenos"> 51</span>    <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos"> 52</span>    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
<span class="linenos"> 53</span>    <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos"> 54</span>        <span class="s2">&quot;Autotuning is only supported for provided task environments.&quot;</span>
<span class="linenos"> 55</span>        <span class="s2">&quot; Supply this argument to increase the number of environments until a desired threshold is reached.&quot;</span>
<span class="linenos"> 56</span>        <span class="s2">&quot;Install pynvml in your environment; ./isaaclab.sh -m pip install pynvml&quot;</span>
<span class="linenos"> 57</span>    <span class="p">),</span>
<span class="linenos"> 58</span><span class="p">)</span>
<span class="linenos"> 59</span>
<span class="linenos"> 60</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 61</span>    <span class="s2">&quot;--task_num_cameras_per_env&quot;</span><span class="p">,</span>
<span class="linenos"> 62</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos"> 63</span>    <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 64</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The number of cameras per environment to use when using a known task.&quot;</span><span class="p">,</span>
<span class="linenos"> 65</span><span class="p">)</span>
<span class="linenos"> 66</span>
<span class="linenos"> 67</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 68</span>    <span class="s2">&quot;--use_fabric&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Enable fabric and use USD I/O operations.&quot;</span>
<span class="linenos"> 69</span><span class="p">)</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 72</span>    <span class="s2">&quot;--autotune_max_percentage_util&quot;</span><span class="p">,</span>
<span class="linenos"> 73</span>    <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
<span class="linenos"> 74</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
<span class="linenos"> 75</span>    <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">],</span>
<span class="linenos"> 76</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos"> 77</span>    <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos"> 78</span>        <span class="s2">&quot;The system utilization percentage thresholds to reach before an autotune is finished. &quot;</span>
<span class="linenos"> 79</span>        <span class="s2">&quot;If any one of these limits are hit, the autotune stops.&quot;</span>
<span class="linenos"> 80</span>        <span class="s2">&quot;Thresholds are, in order, maximum CPU percentage utilization,&quot;</span>
<span class="linenos"> 81</span>        <span class="s2">&quot;maximum RAM percentage utilization, maximum GPU compute percent utilization, &quot;</span>
<span class="linenos"> 82</span>        <span class="s2">&quot;amd maximum GPU memory utilization.&quot;</span>
<span class="linenos"> 83</span>    <span class="p">),</span>
<span class="linenos"> 84</span><span class="p">)</span>
<span class="linenos"> 85</span>
<span class="linenos"> 86</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 87</span>    <span class="s2">&quot;--autotune_max_camera_count&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The maximum amount of cameras allowed in an autotune.&quot;</span>
<span class="linenos"> 88</span><span class="p">)</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos"> 91</span>    <span class="s2">&quot;--autotune_camera_count_interval&quot;</span><span class="p">,</span>
<span class="linenos"> 92</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos"> 93</span>    <span class="n">default</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
<span class="linenos"> 94</span>    <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos"> 95</span>        <span class="s2">&quot;The number of cameras to try to add to the environment if the current camera count&quot;</span>
<span class="linenos"> 96</span>        <span class="s2">&quot; falls within permitted system resource utilization limits.&quot;</span>
<span class="linenos"> 97</span>    <span class="p">),</span>
<span class="linenos"> 98</span><span class="p">)</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">101</span><span class="sd">The following arguments are shared for when injecting cameras into a task environment,</span>
<span class="linenos">102</span><span class="sd">as well as when creating cameras independent of a task environment.</span>
<span class="linenos">103</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">104</span>
<span class="linenos">105</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">106</span>    <span class="s2">&quot;--num_tiled_cameras&quot;</span><span class="p">,</span>
<span class="linenos">107</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">108</span>    <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">109</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">110</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of tiled cameras to create. For autotuning, this is how many cameras to start with.&quot;</span><span class="p">,</span>
<span class="linenos">111</span><span class="p">)</span>
<span class="linenos">112</span>
<span class="linenos">113</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">114</span>    <span class="s2">&quot;--num_standard_cameras&quot;</span><span class="p">,</span>
<span class="linenos">115</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">116</span>    <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">117</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">118</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of standard cameras to create. For autotuning, this is how many cameras to start with.&quot;</span><span class="p">,</span>
<span class="linenos">119</span><span class="p">)</span>
<span class="linenos">120</span>
<span class="linenos">121</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">122</span>    <span class="s2">&quot;--num_ray_caster_cameras&quot;</span><span class="p">,</span>
<span class="linenos">123</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">124</span>    <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">125</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">126</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of ray caster cameras to create. For autotuning, this is how many cameras to start with.&quot;</span><span class="p">,</span>
<span class="linenos">127</span><span class="p">)</span>
<span class="linenos">128</span>
<span class="linenos">129</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">130</span>    <span class="s2">&quot;--tiled_camera_data_types&quot;</span><span class="p">,</span>
<span class="linenos">131</span>    <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
<span class="linenos">132</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<span class="linenos">133</span>    <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">],</span>
<span class="linenos">134</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The data types rendered by the tiled camera&quot;</span><span class="p">,</span>
<span class="linenos">135</span><span class="p">)</span>
<span class="linenos">136</span>
<span class="linenos">137</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">138</span>    <span class="s2">&quot;--standard_camera_data_types&quot;</span><span class="p">,</span>
<span class="linenos">139</span>    <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
<span class="linenos">140</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<span class="linenos">141</span>    <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;distance_to_image_plane&quot;</span><span class="p">,</span> <span class="s2">&quot;distance_to_camera&quot;</span><span class="p">],</span>
<span class="linenos">142</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The data types rendered by the standard camera&quot;</span><span class="p">,</span>
<span class="linenos">143</span><span class="p">)</span>
<span class="linenos">144</span>
<span class="linenos">145</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">146</span>    <span class="s2">&quot;--ray_caster_camera_data_types&quot;</span><span class="p">,</span>
<span class="linenos">147</span>    <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
<span class="linenos">148</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<span class="linenos">149</span>    <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;distance_to_image_plane&quot;</span><span class="p">],</span>
<span class="linenos">150</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The data types rendered by the ray caster camera.&quot;</span><span class="p">,</span>
<span class="linenos">151</span><span class="p">)</span>
<span class="linenos">152</span>
<span class="linenos">153</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">154</span>    <span class="s2">&quot;--ray_caster_visible_mesh_prim_paths&quot;</span><span class="p">,</span>
<span class="linenos">155</span>    <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
<span class="linenos">156</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<span class="linenos">157</span>    <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;/World/ground&quot;</span><span class="p">],</span>
<span class="linenos">158</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;WARNING: Ray Caster can currently only cast against a single, static, object&quot;</span><span class="p">,</span>
<span class="linenos">159</span><span class="p">)</span>
<span class="linenos">160</span>
<span class="linenos">161</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">162</span>    <span class="s2">&quot;--convert_depth_to_camera_to_image_plane&quot;</span><span class="p">,</span>
<span class="linenos">163</span>    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
<span class="linenos">164</span>    <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">165</span>    <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos">166</span>        <span class="s2">&quot;Enable undistorting from perspective view (distance to camera data_type)&quot;</span>
<span class="linenos">167</span>        <span class="s2">&quot;to orthogonal view (distance to plane data_type) for depth.&quot;</span>
<span class="linenos">168</span>        <span class="s2">&quot;This is currently needed to create undisorted depth images/point cloud.&quot;</span>
<span class="linenos">169</span>    <span class="p">),</span>
<span class="linenos">170</span><span class="p">)</span>
<span class="linenos">171</span>
<span class="linenos">172</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">173</span>    <span class="s2">&quot;--keep_raw_depth&quot;</span><span class="p">,</span>
<span class="linenos">174</span>    <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;convert_depth_to_camera_to_image_plane&quot;</span><span class="p">,</span>
<span class="linenos">175</span>    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_false&quot;</span><span class="p">,</span>
<span class="linenos">176</span>    <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos">177</span>        <span class="s2">&quot;Disable undistorting from perspective view (distance to camera)&quot;</span>
<span class="linenos">178</span>        <span class="s2">&quot;to orthogonal view (distance to plane data_type) for depth.&quot;</span>
<span class="linenos">179</span>    <span class="p">),</span>
<span class="linenos">180</span><span class="p">)</span>
<span class="linenos">181</span>
<span class="linenos">182</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">183</span>    <span class="s2">&quot;--height&quot;</span><span class="p">,</span>
<span class="linenos">184</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">185</span>    <span class="n">default</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
<span class="linenos">186</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">187</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Height in pixels of cameras&quot;</span><span class="p">,</span>
<span class="linenos">188</span><span class="p">)</span>
<span class="linenos">189</span>
<span class="linenos">190</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">191</span>    <span class="s2">&quot;--width&quot;</span><span class="p">,</span>
<span class="linenos">192</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">193</span>    <span class="n">default</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span>
<span class="linenos">194</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">195</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Width in pixels of cameras&quot;</span><span class="p">,</span>
<span class="linenos">196</span><span class="p">)</span>
<span class="linenos">197</span>
<span class="linenos">198</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">199</span>    <span class="s2">&quot;--warm_start_length&quot;</span><span class="p">,</span>
<span class="linenos">200</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">201</span>    <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">202</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">203</span>    <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos">204</span>        <span class="s2">&quot;Number of steps to run the sim before starting benchmark.&quot;</span>
<span class="linenos">205</span>        <span class="s2">&quot;Needed to avoid blank images at the start of the simulation.&quot;</span>
<span class="linenos">206</span>    <span class="p">),</span>
<span class="linenos">207</span><span class="p">)</span>
<span class="linenos">208</span>
<span class="linenos">209</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">210</span>    <span class="s2">&quot;--experiment_length&quot;</span><span class="p">,</span>
<span class="linenos">211</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">212</span>    <span class="n">default</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
<span class="linenos">213</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">214</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of steps to average over&quot;</span><span class="p">,</span>
<span class="linenos">215</span><span class="p">)</span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="c1"># This argument is only used when a task is not provided.</span>
<span class="linenos">218</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">219</span>    <span class="s2">&quot;--num_objects&quot;</span><span class="p">,</span>
<span class="linenos">220</span>    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">221</span>    <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="linenos">222</span>    <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">223</span>    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of objects to spawn into the scene when not using a known task.&quot;</span><span class="p">,</span>
<span class="linenos">224</span><span class="p">)</span>
<span class="linenos">225</span>
<span class="linenos">226</span>
<span class="linenos">227</span><span class="n">AppLauncher</span><span class="o">.</span><span class="n">add_app_launcher_args</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
<span class="linenos">228</span><span class="n">args_cli</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="linenos">229</span><span class="n">args_cli</span><span class="o">.</span><span class="n">enable_cameras</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">230</span>
<span class="linenos">231</span><span class="k">if</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune</span><span class="p">:</span>
<span class="linenos">232</span>    <span class="kn">import</span><span class="w"> </span><span class="nn">pynvml</span>
<span class="linenos">233</span>
<span class="linenos">234</span><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args_cli</span><span class="o">.</span><span class="n">ray_caster_visible_mesh_prim_paths</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">235</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[WARNING]: Ray Casting is only currently supported for a single, static object&quot;</span><span class="p">)</span>
<span class="linenos">236</span><span class="c1"># launch omniverse app</span>
<span class="linenos">237</span><span class="n">app_launcher</span> <span class="o">=</span> <span class="n">AppLauncher</span><span class="p">(</span><span class="n">args_cli</span><span class="p">)</span>
<span class="linenos">238</span><span class="n">simulation_app</span> <span class="o">=</span> <span class="n">app_launcher</span><span class="o">.</span><span class="n">app</span>
<span class="linenos">239</span>
<span class="linenos">240</span><span class="sd">&quot;&quot;&quot;Rest everything follows.&quot;&quot;&quot;</span>
<span class="linenos">241</span>
<span class="linenos">242</span><span class="kn">import</span><span class="w"> </span><span class="nn">gymnasium</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gym</span>
<span class="linenos">243</span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="linenos">244</span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="linenos">245</span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="linenos">246</span><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<span class="linenos">247</span>
<span class="linenos">248</span><span class="kn">import</span><span class="w"> </span><span class="nn">omni.isaac.core.utils.prims</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">prim_utils</span>
<span class="linenos">249</span><span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>
<span class="linenos">250</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.core.utils.stage</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_new_stage</span>
<span class="linenos">251</span>
<span class="linenos">252</span><span class="kn">import</span><span class="w"> </span><span class="nn">omni.isaac.lab.sim</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sim_utils</span>
<span class="linenos">253</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.lab.assets</span><span class="w"> </span><span class="kn">import</span> <span class="n">RigidObject</span><span class="p">,</span> <span class="n">RigidObjectCfg</span>
<span class="linenos">254</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.lab.scene.interactive_scene</span><span class="w"> </span><span class="kn">import</span> <span class="n">InteractiveScene</span>
<span class="linenos">255</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.lab.sensors</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos">256</span>    <span class="n">Camera</span><span class="p">,</span>
<span class="linenos">257</span>    <span class="n">CameraCfg</span><span class="p">,</span>
<span class="linenos">258</span>    <span class="n">RayCasterCamera</span><span class="p">,</span>
<span class="linenos">259</span>    <span class="n">RayCasterCameraCfg</span><span class="p">,</span>
<span class="linenos">260</span>    <span class="n">TiledCamera</span><span class="p">,</span>
<span class="linenos">261</span>    <span class="n">TiledCameraCfg</span><span class="p">,</span>
<span class="linenos">262</span>    <span class="n">patterns</span><span class="p">,</span>
<span class="linenos">263</span><span class="p">)</span>
<span class="linenos">264</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.lab.utils.math</span><span class="w"> </span><span class="kn">import</span> <span class="n">orthogonalize_perspective_depth</span><span class="p">,</span> <span class="n">unproject_depth</span>
<span class="linenos">265</span>
<span class="linenos">266</span><span class="kn">from</span><span class="w"> </span><span class="nn">omni.isaac.lab_tasks.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_cfg_from_registry</span>
<span class="linenos">267</span>
<span class="linenos">268</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">269</span><span class="sd">Camera Creation</span>
<span class="linenos">270</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">271</span>
<span class="linenos">272</span>
<span class="linenos">273</span><span class="k">def</span><span class="w"> </span><span class="nf">create_camera_base</span><span class="p">(</span>
<span class="linenos">274</span>    <span class="n">camera_cfg</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">CameraCfg</span> <span class="o">|</span> <span class="n">TiledCameraCfg</span><span class="p">],</span>
<span class="linenos">275</span>    <span class="n">num_cams</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="linenos">276</span>    <span class="n">data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<span class="linenos">277</span>    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="linenos">278</span>    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="linenos">279</span>    <span class="n">prim_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">280</span>    <span class="n">instantiate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">281</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Camera</span> <span class="o">|</span> <span class="n">TiledCamera</span> <span class="o">|</span> <span class="n">CameraCfg</span> <span class="o">|</span> <span class="n">TiledCameraCfg</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">282</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Generalized function to create a camera or tiled camera sensor.&quot;&quot;&quot;</span>
<span class="linenos">283</span>    <span class="c1"># Determine prim prefix based on the camera class</span>
<span class="linenos">284</span>    <span class="n">name</span> <span class="o">=</span> <span class="n">camera_cfg</span><span class="o">.</span><span class="n">class_type</span><span class="o">.</span><span class="vm">__name__</span>
<span class="linenos">285</span>
<span class="linenos">286</span>    <span class="k">if</span> <span class="n">instantiate</span><span class="p">:</span>
<span class="linenos">287</span>        <span class="c1"># Create the necessary prims</span>
<span class="linenos">288</span>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cams</span><span class="p">):</span>
<span class="linenos">289</span>            <span class="n">prim_utils</span><span class="o">.</span><span class="n">create_prim</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/World/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">idx</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;Xform&quot;</span><span class="p">)</span>
<span class="linenos">290</span>    <span class="k">if</span> <span class="n">prim_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">291</span>        <span class="n">prim_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/World/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_.*/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="linenos">292</span>    <span class="c1"># If valid camera settings are provided, create the camera</span>
<span class="linenos">293</span>    <span class="k">if</span> <span class="n">num_cams</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_types</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">294</span>        <span class="n">cfg</span> <span class="o">=</span> <span class="n">camera_cfg</span><span class="p">(</span>
<span class="linenos">295</span>            <span class="n">prim_path</span><span class="o">=</span><span class="n">prim_path</span><span class="p">,</span>
<span class="linenos">296</span>            <span class="n">update_period</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">297</span>            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">298</span>            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">299</span>            <span class="n">data_types</span><span class="o">=</span><span class="n">data_types</span><span class="p">,</span>
<span class="linenos">300</span>            <span class="n">spawn</span><span class="o">=</span><span class="n">sim_utils</span><span class="o">.</span><span class="n">PinholeCameraCfg</span><span class="p">(</span>
<span class="linenos">301</span>                <span class="n">focal_length</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">focus_distance</span><span class="o">=</span><span class="mf">400.0</span><span class="p">,</span> <span class="n">horizontal_aperture</span><span class="o">=</span><span class="mf">20.955</span><span class="p">,</span> <span class="n">clipping_range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1e4</span><span class="p">)</span>
<span class="linenos">302</span>            <span class="p">),</span>
<span class="linenos">303</span>        <span class="p">)</span>
<span class="linenos">304</span>        <span class="k">if</span> <span class="n">instantiate</span><span class="p">:</span>
<span class="linenos">305</span>            <span class="k">return</span> <span class="n">camera_cfg</span><span class="o">.</span><span class="n">class_type</span><span class="p">(</span><span class="n">cfg</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<span class="linenos">306</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">307</span>            <span class="k">return</span> <span class="n">cfg</span>
<span class="linenos">308</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">309</span>        <span class="k">return</span> <span class="kc">None</span>
<span class="linenos">310</span>
<span class="linenos">311</span>
<span class="linenos">312</span><span class="k">def</span><span class="w"> </span><span class="nf">create_tiled_cameras</span><span class="p">(</span>
<span class="linenos">313</span>    <span class="n">num_cams</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">120</span>
<span class="linenos">314</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TiledCamera</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">315</span>    <span class="k">if</span> <span class="n">data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">316</span>        <span class="n">data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">]</span>
<span class="linenos">317</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines the tiled camera sensor to add to the scene.&quot;&quot;&quot;</span>
<span class="linenos">318</span>    <span class="k">return</span> <span class="n">create_camera_base</span><span class="p">(</span>
<span class="linenos">319</span>        <span class="n">camera_cfg</span><span class="o">=</span><span class="n">TiledCameraCfg</span><span class="p">,</span>
<span class="linenos">320</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">num_cams</span><span class="p">,</span>
<span class="linenos">321</span>        <span class="n">data_types</span><span class="o">=</span><span class="n">data_types</span><span class="p">,</span>
<span class="linenos">322</span>        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">323</span>        <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">324</span>    <span class="p">)</span>
<span class="linenos">325</span>
<span class="linenos">326</span>
<span class="linenos">327</span><span class="k">def</span><span class="w"> </span><span class="nf">create_cameras</span><span class="p">(</span>
<span class="linenos">328</span>    <span class="n">num_cams</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">120</span>
<span class="linenos">329</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Camera</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">330</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines the Standard cameras.&quot;&quot;&quot;</span>
<span class="linenos">331</span>    <span class="k">if</span> <span class="n">data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">332</span>        <span class="n">data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">]</span>
<span class="linenos">333</span>    <span class="k">return</span> <span class="n">create_camera_base</span><span class="p">(</span>
<span class="linenos">334</span>        <span class="n">camera_cfg</span><span class="o">=</span><span class="n">CameraCfg</span><span class="p">,</span> <span class="n">num_cams</span><span class="o">=</span><span class="n">num_cams</span><span class="p">,</span> <span class="n">data_types</span><span class="o">=</span><span class="n">data_types</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span>
<span class="linenos">335</span>    <span class="p">)</span>
<span class="linenos">336</span>
<span class="linenos">337</span>
<span class="linenos">338</span><span class="k">def</span><span class="w"> </span><span class="nf">create_ray_caster_cameras</span><span class="p">(</span>
<span class="linenos">339</span>    <span class="n">num_cams</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="linenos">340</span>    <span class="n">data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;distance_to_image_plane&quot;</span><span class="p">],</span>
<span class="linenos">341</span>    <span class="n">mesh_prim_paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;/World/ground&quot;</span><span class="p">],</span>
<span class="linenos">342</span>    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="linenos">343</span>    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">120</span><span class="p">,</span>
<span class="linenos">344</span>    <span class="n">prim_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/World/RayCasterCamera_.*/RayCaster&quot;</span><span class="p">,</span>
<span class="linenos">345</span>    <span class="n">instantiate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">346</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RayCasterCamera</span> <span class="o">|</span> <span class="n">RayCasterCameraCfg</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">347</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the raycaster cameras; different configuration than Standard/Tiled camera&quot;&quot;&quot;</span>
<span class="linenos">348</span>    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cams</span><span class="p">):</span>
<span class="linenos">349</span>        <span class="n">prim_utils</span><span class="o">.</span><span class="n">create_prim</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/World/RayCasterCamera_</span><span class="si">{</span><span class="n">idx</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">/RayCaster&quot;</span><span class="p">,</span> <span class="s2">&quot;Xform&quot;</span><span class="p">)</span>
<span class="linenos">350</span>
<span class="linenos">351</span>    <span class="k">if</span> <span class="n">num_cams</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_types</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">352</span>        <span class="n">cam_cfg</span> <span class="o">=</span> <span class="n">RayCasterCameraCfg</span><span class="p">(</span>
<span class="linenos">353</span>            <span class="n">prim_path</span><span class="o">=</span><span class="n">prim_path</span><span class="p">,</span>
<span class="linenos">354</span>            <span class="n">mesh_prim_paths</span><span class="o">=</span><span class="n">mesh_prim_paths</span><span class="p">,</span>
<span class="linenos">355</span>            <span class="n">update_period</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">356</span>            <span class="n">offset</span><span class="o">=</span><span class="n">RayCasterCameraCfg</span><span class="o">.</span><span class="n">OffsetCfg</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">rot</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)),</span>
<span class="linenos">357</span>            <span class="n">data_types</span><span class="o">=</span><span class="n">data_types</span><span class="p">,</span>
<span class="linenos">358</span>            <span class="n">debug_vis</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">359</span>            <span class="n">pattern_cfg</span><span class="o">=</span><span class="n">patterns</span><span class="o">.</span><span class="n">PinholeCameraPatternCfg</span><span class="p">(</span>
<span class="linenos">360</span>                <span class="n">focal_length</span><span class="o">=</span><span class="mf">24.0</span><span class="p">,</span>
<span class="linenos">361</span>                <span class="n">horizontal_aperture</span><span class="o">=</span><span class="mf">20.955</span><span class="p">,</span>
<span class="linenos">362</span>                <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">,</span>
<span class="linenos">363</span>                <span class="n">width</span><span class="o">=</span><span class="mi">640</span><span class="p">,</span>
<span class="linenos">364</span>            <span class="p">),</span>
<span class="linenos">365</span>        <span class="p">)</span>
<span class="linenos">366</span>        <span class="k">if</span> <span class="n">instantiate</span><span class="p">:</span>
<span class="linenos">367</span>            <span class="k">return</span> <span class="n">RayCasterCamera</span><span class="p">(</span><span class="n">cfg</span><span class="o">=</span><span class="n">cam_cfg</span><span class="p">)</span>
<span class="linenos">368</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">369</span>            <span class="k">return</span> <span class="n">cam_cfg</span>
<span class="linenos">370</span>
<span class="linenos">371</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">372</span>        <span class="k">return</span> <span class="kc">None</span>
<span class="linenos">373</span>
<span class="linenos">374</span>
<span class="linenos">375</span><span class="k">def</span><span class="w"> </span><span class="nf">create_tiled_camera_cfg</span><span class="p">(</span><span class="n">prim_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TiledCameraCfg</span><span class="p">:</span>
<span class="linenos">376</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Grab a simple tiled camera config for injecting into task environments.&quot;&quot;&quot;</span>
<span class="linenos">377</span>    <span class="k">return</span> <span class="n">create_camera_base</span><span class="p">(</span>
<span class="linenos">378</span>        <span class="n">TiledCameraCfg</span><span class="p">,</span>
<span class="linenos">379</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span><span class="p">,</span>
<span class="linenos">380</span>        <span class="n">data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">tiled_camera_data_types</span><span class="p">,</span>
<span class="linenos">381</span>        <span class="n">width</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">382</span>        <span class="n">height</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">383</span>        <span class="n">prim_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{ENV_REGEX_NS}</span><span class="s2">/&quot;</span> <span class="o">+</span> <span class="n">prim_path</span><span class="p">,</span>
<span class="linenos">384</span>        <span class="n">instantiate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">385</span>    <span class="p">)</span>
<span class="linenos">386</span>
<span class="linenos">387</span>
<span class="linenos">388</span><span class="k">def</span><span class="w"> </span><span class="nf">create_standard_camera_cfg</span><span class="p">(</span><span class="n">prim_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CameraCfg</span><span class="p">:</span>
<span class="linenos">389</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Grab a simple standard camera config for injecting into task environments.&quot;&quot;&quot;</span>
<span class="linenos">390</span>    <span class="k">return</span> <span class="n">create_camera_base</span><span class="p">(</span>
<span class="linenos">391</span>        <span class="n">CameraCfg</span><span class="p">,</span>
<span class="linenos">392</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span><span class="p">,</span>
<span class="linenos">393</span>        <span class="n">data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">standard_camera_data_types</span><span class="p">,</span>
<span class="linenos">394</span>        <span class="n">width</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">395</span>        <span class="n">height</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">396</span>        <span class="n">prim_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{ENV_REGEX_NS}</span><span class="s2">/&quot;</span> <span class="o">+</span> <span class="n">prim_path</span><span class="p">,</span>
<span class="linenos">397</span>        <span class="n">instantiate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">398</span>    <span class="p">)</span>
<span class="linenos">399</span>
<span class="linenos">400</span>
<span class="linenos">401</span><span class="k">def</span><span class="w"> </span><span class="nf">create_ray_caster_camera_cfg</span><span class="p">(</span><span class="n">prim_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RayCasterCameraCfg</span><span class="p">:</span>
<span class="linenos">402</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Grab a simple ray caster config for injecting into task environments.&quot;&quot;&quot;</span>
<span class="linenos">403</span>    <span class="k">return</span> <span class="n">create_ray_caster_cameras</span><span class="p">(</span>
<span class="linenos">404</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span><span class="p">,</span>
<span class="linenos">405</span>        <span class="n">data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">ray_caster_camera_data_types</span><span class="p">,</span>
<span class="linenos">406</span>        <span class="n">width</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">407</span>        <span class="n">height</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">408</span>        <span class="n">prim_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{ENV_REGEX_NS}</span><span class="s2">/&quot;</span> <span class="o">+</span> <span class="n">prim_path</span><span class="p">,</span>
<span class="linenos">409</span>    <span class="p">)</span>
<span class="linenos">410</span>
<span class="linenos">411</span>
<span class="linenos">412</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">413</span><span class="sd">Scene Creation</span>
<span class="linenos">414</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">415</span>
<span class="linenos">416</span>
<span class="linenos">417</span><span class="k">def</span><span class="w"> </span><span class="nf">design_scene</span><span class="p">(</span>
<span class="linenos">418</span>    <span class="n">num_tiled_cams</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="linenos">419</span>    <span class="n">num_standard_cams</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">420</span>    <span class="n">num_ray_caster_cams</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">421</span>    <span class="n">tiled_camera_data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">422</span>    <span class="n">standard_camera_data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">423</span>    <span class="n">ray_caster_camera_data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">424</span>    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="linenos">425</span>    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
<span class="linenos">426</span>    <span class="n">num_objects</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="linenos">427</span>    <span class="n">mesh_prim_paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;/World/ground&quot;</span><span class="p">],</span>
<span class="linenos">428</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="linenos">429</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Design the scene.&quot;&quot;&quot;</span>
<span class="linenos">430</span>    <span class="k">if</span> <span class="n">tiled_camera_data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">431</span>        <span class="n">tiled_camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]</span>
<span class="linenos">432</span>    <span class="k">if</span> <span class="n">standard_camera_data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">433</span>        <span class="n">standard_camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]</span>
<span class="linenos">434</span>    <span class="k">if</span> <span class="n">ray_caster_camera_data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">435</span>        <span class="n">ray_caster_camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;distance_to_image_plane&quot;</span><span class="p">]</span>
<span class="linenos">436</span>
<span class="linenos">437</span>    <span class="c1"># Populate scene</span>
<span class="linenos">438</span>    <span class="c1"># -- Ground-plane</span>
<span class="linenos">439</span>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">GroundPlaneCfg</span><span class="p">()</span>
<span class="linenos">440</span>    <span class="n">cfg</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="s2">&quot;/World/ground&quot;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
<span class="linenos">441</span>    <span class="c1"># -- Lights</span>
<span class="linenos">442</span>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">DistantLightCfg</span><span class="p">(</span><span class="n">intensity</span><span class="o">=</span><span class="mf">3000.0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">))</span>
<span class="linenos">443</span>    <span class="n">cfg</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="s2">&quot;/World/Light&quot;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
<span class="linenos">444</span>
<span class="linenos">445</span>    <span class="c1"># Create a dictionary for the scene entities</span>
<span class="linenos">446</span>    <span class="n">scene_entities</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">447</span>
<span class="linenos">448</span>    <span class="c1"># Xform to hold objects</span>
<span class="linenos">449</span>    <span class="n">prim_utils</span><span class="o">.</span><span class="n">create_prim</span><span class="p">(</span><span class="s2">&quot;/World/Objects&quot;</span><span class="p">,</span> <span class="s2">&quot;Xform&quot;</span><span class="p">)</span>
<span class="linenos">450</span>    <span class="c1"># Random objects</span>
<span class="linenos">451</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_objects</span><span class="p">):</span>
<span class="linenos">452</span>        <span class="c1"># sample random position</span>
<span class="linenos">453</span>        <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>
<span class="linenos">454</span>        <span class="n">position</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
<span class="linenos">455</span>        <span class="c1"># sample random color</span>
<span class="linenos">456</span>        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
<span class="linenos">457</span>        <span class="c1"># choose random prim type</span>
<span class="linenos">458</span>        <span class="n">prim_type</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;Cube&quot;</span><span class="p">,</span> <span class="s2">&quot;Cone&quot;</span><span class="p">,</span> <span class="s2">&quot;Cylinder&quot;</span><span class="p">])</span>
<span class="linenos">459</span>        <span class="n">common_properties</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">460</span>            <span class="s2">&quot;rigid_props&quot;</span><span class="p">:</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">RigidBodyPropertiesCfg</span><span class="p">(),</span>
<span class="linenos">461</span>            <span class="s2">&quot;mass_props&quot;</span><span class="p">:</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">MassPropertiesCfg</span><span class="p">(</span><span class="n">mass</span><span class="o">=</span><span class="mf">5.0</span><span class="p">),</span>
<span class="linenos">462</span>            <span class="s2">&quot;collision_props&quot;</span><span class="p">:</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">CollisionPropertiesCfg</span><span class="p">(),</span>
<span class="linenos">463</span>            <span class="s2">&quot;visual_material&quot;</span><span class="p">:</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">PreviewSurfaceCfg</span><span class="p">(</span><span class="n">diffuse_color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">metallic</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span>
<span class="linenos">464</span>            <span class="s2">&quot;semantic_tags&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">prim_type</span><span class="p">)],</span>
<span class="linenos">465</span>        <span class="p">}</span>
<span class="linenos">466</span>        <span class="k">if</span> <span class="n">prim_type</span> <span class="o">==</span> <span class="s2">&quot;Cube&quot;</span><span class="p">:</span>
<span class="linenos">467</span>            <span class="n">shape_cfg</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">CuboidCfg</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">),</span> <span class="o">**</span><span class="n">common_properties</span><span class="p">)</span>
<span class="linenos">468</span>        <span class="k">elif</span> <span class="n">prim_type</span> <span class="o">==</span> <span class="s2">&quot;Cone&quot;</span><span class="p">:</span>
<span class="linenos">469</span>            <span class="n">shape_cfg</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">ConeCfg</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="o">**</span><span class="n">common_properties</span><span class="p">)</span>
<span class="linenos">470</span>        <span class="k">elif</span> <span class="n">prim_type</span> <span class="o">==</span> <span class="s2">&quot;Cylinder&quot;</span><span class="p">:</span>
<span class="linenos">471</span>            <span class="n">shape_cfg</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">CylinderCfg</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="o">**</span><span class="n">common_properties</span><span class="p">)</span>
<span class="linenos">472</span>        <span class="c1"># Rigid Object</span>
<span class="linenos">473</span>        <span class="n">obj_cfg</span> <span class="o">=</span> <span class="n">RigidObjectCfg</span><span class="p">(</span>
<span class="linenos">474</span>            <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/Objects/Obj_</span><span class="si">{</span><span class="n">i</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="linenos">475</span>            <span class="n">spawn</span><span class="o">=</span><span class="n">shape_cfg</span><span class="p">,</span>
<span class="linenos">476</span>            <span class="n">init_state</span><span class="o">=</span><span class="n">RigidObjectCfg</span><span class="o">.</span><span class="n">InitialStateCfg</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">position</span><span class="p">),</span>
<span class="linenos">477</span>        <span class="p">)</span>
<span class="linenos">478</span>        <span class="n">scene_entities</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;rigid_object</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">RigidObject</span><span class="p">(</span><span class="n">cfg</span><span class="o">=</span><span class="n">obj_cfg</span><span class="p">)</span>
<span class="linenos">479</span>
<span class="linenos">480</span>    <span class="c1"># Sensors</span>
<span class="linenos">481</span>    <span class="n">standard_camera</span> <span class="o">=</span> <span class="n">create_cameras</span><span class="p">(</span>
<span class="linenos">482</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">num_standard_cams</span><span class="p">,</span> <span class="n">data_types</span><span class="o">=</span><span class="n">standard_camera_data_types</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span>
<span class="linenos">483</span>    <span class="p">)</span>
<span class="linenos">484</span>    <span class="n">tiled_camera</span> <span class="o">=</span> <span class="n">create_tiled_cameras</span><span class="p">(</span>
<span class="linenos">485</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">num_tiled_cams</span><span class="p">,</span> <span class="n">data_types</span><span class="o">=</span><span class="n">tiled_camera_data_types</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span>
<span class="linenos">486</span>    <span class="p">)</span>
<span class="linenos">487</span>    <span class="n">ray_caster_camera</span> <span class="o">=</span> <span class="n">create_ray_caster_cameras</span><span class="p">(</span>
<span class="linenos">488</span>        <span class="n">num_cams</span><span class="o">=</span><span class="n">num_ray_caster_cams</span><span class="p">,</span>
<span class="linenos">489</span>        <span class="n">data_types</span><span class="o">=</span><span class="n">ray_caster_camera_data_types</span><span class="p">,</span>
<span class="linenos">490</span>        <span class="n">mesh_prim_paths</span><span class="o">=</span><span class="n">mesh_prim_paths</span><span class="p">,</span>
<span class="linenos">491</span>        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">492</span>        <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">493</span>    <span class="p">)</span>
<span class="linenos">494</span>    <span class="c1"># return the scene information</span>
<span class="linenos">495</span>    <span class="k">if</span> <span class="n">tiled_camera</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">496</span>        <span class="n">scene_entities</span><span class="p">[</span><span class="s2">&quot;tiled_camera&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tiled_camera</span>
<span class="linenos">497</span>    <span class="k">if</span> <span class="n">standard_camera</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">498</span>        <span class="n">scene_entities</span><span class="p">[</span><span class="s2">&quot;standard_camera&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">standard_camera</span>
<span class="linenos">499</span>    <span class="k">if</span> <span class="n">ray_caster_camera</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">500</span>        <span class="n">scene_entities</span><span class="p">[</span><span class="s2">&quot;ray_caster_camera&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ray_caster_camera</span>
<span class="linenos">501</span>    <span class="k">return</span> <span class="n">scene_entities</span>
<span class="linenos">502</span>
<span class="linenos">503</span>
<span class="linenos">504</span><span class="k">def</span><span class="w"> </span><span class="nf">inject_cameras_into_task</span><span class="p">(</span>
<span class="linenos">505</span>    <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="linenos">506</span>    <span class="n">num_cams</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="linenos">507</span>    <span class="n">camera_name_prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="linenos">508</span>    <span class="n">camera_creation_callable</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
<span class="linenos">509</span>    <span class="n">num_cameras_per_env</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos">510</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gym</span><span class="o">.</span><span class="n">Env</span><span class="p">:</span>
<span class="linenos">511</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the task, sticks cameras into the config, and creates the environment.&quot;&quot;&quot;</span>
<span class="linenos">512</span>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_cfg_from_registry</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;env_cfg_entry_point&quot;</span><span class="p">)</span>
<span class="linenos">513</span>    <span class="n">cfg</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">device</span>
<span class="linenos">514</span>    <span class="n">cfg</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">use_fabric</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">use_fabric</span>
<span class="linenos">515</span>    <span class="n">scene_cfg</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">scene</span>
<span class="linenos">516</span>
<span class="linenos">517</span>    <span class="n">num_envs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_cams</span> <span class="o">/</span> <span class="n">num_cameras_per_env</span><span class="p">)</span>
<span class="linenos">518</span>    <span class="n">scene_cfg</span><span class="o">.</span><span class="n">num_envs</span> <span class="o">=</span> <span class="n">num_envs</span>
<span class="linenos">519</span>
<span class="linenos">520</span>    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cameras_per_env</span><span class="p">):</span>
<span class="linenos">521</span>        <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
<span class="linenos">522</span>        <span class="n">name</span> <span class="o">=</span> <span class="n">camera_name_prefix</span> <span class="o">+</span> <span class="n">suffix</span>
<span class="linenos">523</span>        <span class="nb">setattr</span><span class="p">(</span><span class="n">scene_cfg</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">camera_creation_callable</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
<span class="linenos">524</span>    <span class="n">cfg</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene_cfg</span>
<span class="linenos">525</span>    <span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cfg</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<span class="linenos">526</span>    <span class="k">return</span> <span class="n">env</span>
<span class="linenos">527</span>
<span class="linenos">528</span>
<span class="linenos">529</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">530</span><span class="sd">System diagnosis</span>
<span class="linenos">531</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">532</span>
<span class="linenos">533</span>
<span class="linenos">534</span><span class="k">def</span><span class="w"> </span><span class="nf">get_utilization_percentages</span><span class="p">(</span><span class="n">reset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">max_values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="linenos">535</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the maximum CPU, RAM, GPU utilization (processing), and</span>
<span class="linenos">536</span><span class="sd">    GPU memory usage percentages since the last time reset was true.&quot;&quot;&quot;</span>
<span class="linenos">537</span>    <span class="k">if</span> <span class="n">reset</span><span class="p">:</span>
<span class="linenos">538</span>        <span class="n">max_values</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># Reset the max values</span>
<span class="linenos">539</span>
<span class="linenos">540</span>    <span class="c1"># CPU utilization</span>
<span class="linenos">541</span>    <span class="n">cpu_usage</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="linenos">542</span>    <span class="n">max_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cpu_usage</span><span class="p">)</span>
<span class="linenos">543</span>
<span class="linenos">544</span>    <span class="c1"># RAM utilization</span>
<span class="linenos">545</span>    <span class="n">memory_info</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
<span class="linenos">546</span>    <span class="n">ram_usage</span> <span class="o">=</span> <span class="n">memory_info</span><span class="o">.</span><span class="n">percent</span>
<span class="linenos">547</span>    <span class="n">max_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ram_usage</span><span class="p">)</span>
<span class="linenos">548</span>
<span class="linenos">549</span>    <span class="c1"># GPU utilization using pynvml</span>
<span class="linenos">550</span>    <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
<span class="linenos">551</span>
<span class="linenos">552</span>        <span class="k">if</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune</span><span class="p">:</span>
<span class="linenos">553</span>            <span class="n">pynvml</span><span class="o">.</span><span class="n">nvmlInit</span><span class="p">()</span>  <span class="c1"># Initialize NVML</span>
<span class="linenos">554</span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">device_count</span><span class="p">()):</span>
<span class="linenos">555</span>                <span class="n">handle</span> <span class="o">=</span> <span class="n">pynvml</span><span class="o">.</span><span class="n">nvmlDeviceGetHandleByIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos">556</span>
<span class="linenos">557</span>                <span class="c1"># GPU Utilization</span>
<span class="linenos">558</span>                <span class="n">gpu_utilization</span> <span class="o">=</span> <span class="n">pynvml</span><span class="o">.</span><span class="n">nvmlDeviceGetUtilizationRates</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="linenos">559</span>                <span class="n">gpu_processing_utilization_percent</span> <span class="o">=</span> <span class="n">gpu_utilization</span><span class="o">.</span><span class="n">gpu</span>  <span class="c1"># GPU core utilization</span>
<span class="linenos">560</span>                <span class="n">max_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_values</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">gpu_processing_utilization_percent</span><span class="p">)</span>
<span class="linenos">561</span>
<span class="linenos">562</span>                <span class="c1"># GPU Memory Usage</span>
<span class="linenos">563</span>                <span class="n">memory_info</span> <span class="o">=</span> <span class="n">pynvml</span><span class="o">.</span><span class="n">nvmlDeviceGetMemoryInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="linenos">564</span>                <span class="n">gpu_memory_total</span> <span class="o">=</span> <span class="n">memory_info</span><span class="o">.</span><span class="n">total</span>
<span class="linenos">565</span>                <span class="n">gpu_memory_used</span> <span class="o">=</span> <span class="n">memory_info</span><span class="o">.</span><span class="n">used</span>
<span class="linenos">566</span>                <span class="n">gpu_memory_utilization_percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">gpu_memory_used</span> <span class="o">/</span> <span class="n">gpu_memory_total</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="linenos">567</span>                <span class="n">max_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_values</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">gpu_memory_utilization_percent</span><span class="p">)</span>
<span class="linenos">568</span>
<span class="linenos">569</span>            <span class="n">pynvml</span><span class="o">.</span><span class="n">nvmlShutdown</span><span class="p">()</span>  <span class="c1"># Shutdown NVML after usage</span>
<span class="linenos">570</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">571</span>        <span class="n">gpu_processing_utilization_percent</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">572</span>        <span class="n">gpu_memory_utilization_percent</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">573</span>    <span class="k">return</span> <span class="n">max_values</span>
<span class="linenos">574</span>
<span class="linenos">575</span>
<span class="linenos">576</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">577</span><span class="sd">Experiment</span>
<span class="linenos">578</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">579</span>
<span class="linenos">580</span>
<span class="linenos">581</span><span class="k">def</span><span class="w"> </span><span class="nf">run_simulator</span><span class="p">(</span>
<span class="linenos">582</span>    <span class="n">sim</span><span class="p">:</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">SimulationContext</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">583</span>    <span class="n">scene_entities</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">InteractiveScene</span><span class="p">,</span>
<span class="linenos">584</span>    <span class="n">warm_start_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos">585</span>    <span class="n">experiment_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="linenos">586</span>    <span class="n">tiled_camera_data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">587</span>    <span class="n">standard_camera_data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">588</span>    <span class="n">ray_caster_camera_data_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">589</span>    <span class="n">depth_predicate</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;to&quot;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;depth&quot;</span><span class="p">,</span>
<span class="linenos">590</span>    <span class="n">perspective_depth_predicate</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;distance_to_camera&quot;</span><span class="p">,</span>
<span class="linenos">591</span>    <span class="n">convert_depth_to_camera_to_image_plane</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">592</span>    <span class="n">max_cameras_per_env</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos">593</span>    <span class="n">env</span><span class="p">:</span> <span class="n">gym</span><span class="o">.</span><span class="n">Env</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos">594</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="linenos">595</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the simulator with all cameras, and return timing analytics. Visualize if desired.&quot;&quot;&quot;</span>
<span class="linenos">596</span>
<span class="linenos">597</span>    <span class="k">if</span> <span class="n">tiled_camera_data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">598</span>        <span class="n">tiled_camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]</span>
<span class="linenos">599</span>    <span class="k">if</span> <span class="n">standard_camera_data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">600</span>        <span class="n">standard_camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]</span>
<span class="linenos">601</span>    <span class="k">if</span> <span class="n">ray_caster_camera_data_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">602</span>        <span class="n">ray_caster_camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;distance_to_image_plane&quot;</span><span class="p">]</span>
<span class="linenos">603</span>
<span class="linenos">604</span>    <span class="c1"># Initialize camera lists</span>
<span class="linenos">605</span>    <span class="n">tiled_cameras</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">606</span>    <span class="n">standard_cameras</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">607</span>    <span class="n">ray_caster_cameras</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">608</span>
<span class="linenos">609</span>    <span class="c1"># Dynamically extract cameras from the scene entities up to max_cameras_per_env</span>
<span class="linenos">610</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_cameras_per_env</span><span class="p">):</span>
<span class="linenos">611</span>        <span class="c1"># Extract tiled cameras</span>
<span class="linenos">612</span>        <span class="n">tiled_camera_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;tiled_camera</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;tiled_camera&quot;</span>
<span class="linenos">613</span>        <span class="n">standard_camera_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;standard_camera</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;standard_camera&quot;</span>
<span class="linenos">614</span>        <span class="n">ray_caster_camera_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ray_caster_camera</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;ray_caster_camera&quot;</span>
<span class="linenos">615</span>
<span class="linenos">616</span>        <span class="k">try</span><span class="p">:</span>  <span class="c1"># if instead you checked ... if key is in scene_entities... # errors out always even if key present</span>
<span class="linenos">617</span>            <span class="n">tiled_cameras</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scene_entities</span><span class="p">[</span><span class="n">tiled_camera_key</span><span class="p">])</span>
<span class="linenos">618</span>            <span class="n">standard_cameras</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scene_entities</span><span class="p">[</span><span class="n">standard_camera_key</span><span class="p">])</span>
<span class="linenos">619</span>            <span class="n">ray_caster_cameras</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scene_entities</span><span class="p">[</span><span class="n">ray_caster_camera_key</span><span class="p">])</span>
<span class="linenos">620</span>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<span class="linenos">621</span>            <span class="k">break</span>
<span class="linenos">622</span>
<span class="linenos">623</span>    <span class="c1"># Initialize camera counts</span>
<span class="linenos">624</span>    <span class="n">camera_lists</span> <span class="o">=</span> <span class="p">[</span><span class="n">tiled_cameras</span><span class="p">,</span> <span class="n">standard_cameras</span><span class="p">,</span> <span class="n">ray_caster_cameras</span><span class="p">]</span>
<span class="linenos">625</span>    <span class="n">camera_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">tiled_camera_data_types</span><span class="p">,</span> <span class="n">standard_camera_data_types</span><span class="p">,</span> <span class="n">ray_caster_camera_data_types</span><span class="p">]</span>
<span class="linenos">626</span>    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tiled&quot;</span><span class="p">,</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;ray_caster&quot;</span><span class="p">]</span>
<span class="linenos">627</span>
<span class="linenos">628</span>    <span class="k">if</span> <span class="n">sim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">629</span>        <span class="c1"># Set camera world poses</span>
<span class="linenos">630</span>        <span class="k">for</span> <span class="n">camera_list</span> <span class="ow">in</span> <span class="n">camera_lists</span><span class="p">:</span>
<span class="linenos">631</span>            <span class="k">for</span> <span class="n">camera</span> <span class="ow">in</span> <span class="n">camera_list</span><span class="p">:</span>
<span class="linenos">632</span>                <span class="n">num_cameras</span> <span class="o">=</span> <span class="n">camera</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">intrinsic_matrices</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">633</span>                <span class="n">positions</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">]],</span> <span class="n">device</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">device</span><span class="p">)</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">num_cameras</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">634</span>                <span class="n">targets</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span> <span class="n">device</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">device</span><span class="p">)</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">num_cameras</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">635</span>                <span class="n">camera</span><span class="o">.</span><span class="n">set_world_poses_from_view</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="n">targets</span><span class="p">)</span>
<span class="linenos">636</span>
<span class="linenos">637</span>    <span class="c1"># Initialize timing variables</span>
<span class="linenos">638</span>    <span class="n">timestep</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">639</span>    <span class="n">total_time</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">640</span>    <span class="n">valid_timesteps</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">641</span>    <span class="n">sim_step_time</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">642</span>
<span class="linenos">643</span>    <span class="k">while</span> <span class="n">simulation_app</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span> <span class="ow">and</span> <span class="n">timestep</span> <span class="o">&lt;</span> <span class="n">experiment_length</span><span class="p">:</span>
<span class="linenos">644</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;On timestep </span><span class="si">{</span><span class="n">timestep</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="n">experiment_length</span><span class="si">}</span><span class="s2">, with warm start of </span><span class="si">{</span><span class="n">warm_start_length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">645</span>        <span class="n">get_utilization_percentages</span><span class="p">()</span>
<span class="linenos">646</span>
<span class="linenos">647</span>        <span class="c1"># Measure the total simulation step time</span>
<span class="linenos">648</span>        <span class="n">step_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="linenos">649</span>
<span class="linenos">650</span>        <span class="k">if</span> <span class="n">sim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">651</span>            <span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<span class="linenos">652</span>
<span class="linenos">653</span>        <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">654</span>            <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">inference_mode</span><span class="p">():</span>
<span class="linenos">655</span>                <span class="c1"># compute zero actions</span>
<span class="linenos">656</span>                <span class="n">actions</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="linenos">657</span>                <span class="c1"># apply actions</span>
<span class="linenos">658</span>                <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
<span class="linenos">659</span>
<span class="linenos">660</span>        <span class="c1"># Update cameras and process vision data within the simulation step</span>
<span class="linenos">661</span>        <span class="n">clouds</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">662</span>        <span class="n">images</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">663</span>        <span class="n">depth_images</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos">664</span>
<span class="linenos">665</span>        <span class="c1"># Loop through all camera lists and their data_types</span>
<span class="linenos">666</span>        <span class="k">for</span> <span class="n">camera_list</span><span class="p">,</span> <span class="n">data_types</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">camera_lists</span><span class="p">,</span> <span class="n">camera_data_types</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
<span class="linenos">667</span>            <span class="k">for</span> <span class="n">cam_idx</span><span class="p">,</span> <span class="n">camera</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">camera_list</span><span class="p">):</span>
<span class="linenos">668</span>
<span class="linenos">669</span>                <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># No env, need to step cams manually</span>
<span class="linenos">670</span>                    <span class="c1"># Only update the camera if it hasn&#39;t been updated as part of scene_entities.update ...</span>
<span class="linenos">671</span>                    <span class="n">camera</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">get_physics_dt</span><span class="p">())</span>
<span class="linenos">672</span>
<span class="linenos">673</span>                <span class="k">for</span> <span class="n">data_type</span> <span class="ow">in</span> <span class="n">data_types</span><span class="p">:</span>
<span class="linenos">674</span>                    <span class="n">data_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">cam_idx</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="linenos">675</span>
<span class="linenos">676</span>                    <span class="k">if</span> <span class="n">depth_predicate</span><span class="p">(</span><span class="n">data_type</span><span class="p">):</span>  <span class="c1"># is a depth image, want to create cloud</span>
<span class="linenos">677</span>                        <span class="n">depth</span> <span class="o">=</span> <span class="n">camera</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="n">data_type</span><span class="p">]</span>
<span class="linenos">678</span>                        <span class="n">depth_images</span><span class="p">[</span><span class="n">data_label</span> <span class="o">+</span> <span class="s2">&quot;_raw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">depth</span>
<span class="linenos">679</span>                        <span class="k">if</span> <span class="n">perspective_depth_predicate</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span> <span class="ow">and</span> <span class="n">convert_depth_to_camera_to_image_plane</span><span class="p">:</span>
<span class="linenos">680</span>                            <span class="n">depth</span> <span class="o">=</span> <span class="n">orthogonalize_perspective_depth</span><span class="p">(</span>
<span class="linenos">681</span>                                <span class="n">camera</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="n">data_type</span><span class="p">],</span> <span class="n">camera</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">intrinsic_matrices</span>
<span class="linenos">682</span>                            <span class="p">)</span>
<span class="linenos">683</span>                            <span class="n">depth_images</span><span class="p">[</span><span class="n">data_label</span> <span class="o">+</span> <span class="s2">&quot;_undistorted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">depth</span>
<span class="linenos">684</span>
<span class="linenos">685</span>                        <span class="n">pointcloud</span> <span class="o">=</span> <span class="n">unproject_depth</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">,</span> <span class="n">intrinsics</span><span class="o">=</span><span class="n">camera</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">intrinsic_matrices</span><span class="p">)</span>
<span class="linenos">686</span>                        <span class="n">clouds</span><span class="p">[</span><span class="n">data_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">pointcloud</span>
<span class="linenos">687</span>                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># rgb image, just save it</span>
<span class="linenos">688</span>                        <span class="n">image</span> <span class="o">=</span> <span class="n">camera</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="n">data_type</span><span class="p">]</span>
<span class="linenos">689</span>                        <span class="n">images</span><span class="p">[</span><span class="n">data_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
<span class="linenos">690</span>
<span class="linenos">691</span>        <span class="c1"># End timing for the step</span>
<span class="linenos">692</span>        <span class="n">step_end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="linenos">693</span>        <span class="n">sim_step_time</span> <span class="o">+=</span> <span class="n">step_end_time</span> <span class="o">-</span> <span class="n">step_start_time</span>
<span class="linenos">694</span>
<span class="linenos">695</span>        <span class="k">if</span> <span class="n">timestep</span> <span class="o">&gt;</span> <span class="n">warm_start_length</span><span class="p">:</span>
<span class="linenos">696</span>            <span class="n">get_utilization_percentages</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">697</span>            <span class="n">total_time</span> <span class="o">+=</span> <span class="n">step_end_time</span> <span class="o">-</span> <span class="n">step_start_time</span>
<span class="linenos">698</span>            <span class="n">valid_timesteps</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">699</span>
<span class="linenos">700</span>        <span class="n">timestep</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">701</span>
<span class="linenos">702</span>    <span class="c1"># Calculate average timings</span>
<span class="linenos">703</span>    <span class="k">if</span> <span class="n">valid_timesteps</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">704</span>        <span class="n">avg_timestep_duration</span> <span class="o">=</span> <span class="n">total_time</span> <span class="o">/</span> <span class="n">valid_timesteps</span>
<span class="linenos">705</span>        <span class="n">avg_sim_step_duration</span> <span class="o">=</span> <span class="n">sim_step_time</span> <span class="o">/</span> <span class="n">experiment_length</span>
<span class="linenos">706</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">707</span>        <span class="n">avg_timestep_duration</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">708</span>        <span class="n">avg_sim_step_duration</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">709</span>
<span class="linenos">710</span>    <span class="c1"># Package timing analytics in a dictionary</span>
<span class="linenos">711</span>    <span class="n">timing_analytics</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">712</span>        <span class="s2">&quot;average_timestep_duration&quot;</span><span class="p">:</span> <span class="n">avg_timestep_duration</span><span class="p">,</span>
<span class="linenos">713</span>        <span class="s2">&quot;average_sim_step_duration&quot;</span><span class="p">:</span> <span class="n">avg_sim_step_duration</span><span class="p">,</span>
<span class="linenos">714</span>        <span class="s2">&quot;total_simulation_time&quot;</span><span class="p">:</span> <span class="n">sim_step_time</span><span class="p">,</span>
<span class="linenos">715</span>        <span class="s2">&quot;total_experiment_duration&quot;</span><span class="p">:</span> <span class="n">sim_step_time</span><span class="p">,</span>
<span class="linenos">716</span>    <span class="p">}</span>
<span class="linenos">717</span>
<span class="linenos">718</span>    <span class="n">system_utilization_analytics</span> <span class="o">=</span> <span class="n">get_utilization_percentages</span><span class="p">()</span>
<span class="linenos">719</span>
<span class="linenos">720</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--- Benchmark Results ---&quot;</span><span class="p">)</span>
<span class="linenos">721</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average timestep duration: </span><span class="si">{</span><span class="n">avg_timestep_duration</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
<span class="linenos">722</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average simulation step duration: </span><span class="si">{</span><span class="n">avg_sim_step_duration</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
<span class="linenos">723</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total simulation time: </span><span class="si">{</span><span class="n">sim_step_time</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
<span class="linenos">724</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">System Utilization Statistics:&quot;</span><span class="p">)</span>
<span class="linenos">725</span>    <span class="nb">print</span><span class="p">(</span>
<span class="linenos">726</span>        <span class="sa">f</span><span class="s2">&quot;| CPU:</span><span class="si">{</span><span class="n">system_utilization_analytics</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">% | &quot;</span>
<span class="linenos">727</span>        <span class="sa">f</span><span class="s2">&quot;RAM:</span><span class="si">{</span><span class="n">system_utilization_analytics</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">% | &quot;</span>
<span class="linenos">728</span>        <span class="sa">f</span><span class="s2">&quot;GPU Compute:</span><span class="si">{</span><span class="n">system_utilization_analytics</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">% | &quot;</span>
<span class="linenos">729</span>        <span class="sa">f</span><span class="s2">&quot; GPU Memory: </span><span class="si">{</span><span class="n">system_utilization_analytics</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">% |&quot;</span>
<span class="linenos">730</span>    <span class="p">)</span>
<span class="linenos">731</span>
<span class="linenos">732</span>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;timing_analytics&quot;</span><span class="p">:</span> <span class="n">timing_analytics</span><span class="p">,</span> <span class="s2">&quot;system_utilization_analytics&quot;</span><span class="p">:</span> <span class="n">system_utilization_analytics</span><span class="p">}</span>
<span class="linenos">733</span>
<span class="linenos">734</span>
<span class="linenos">735</span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
<span class="linenos">736</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Main function.&quot;&quot;&quot;</span>
<span class="linenos">737</span>    <span class="c1"># Load simulation context</span>
<span class="linenos">738</span>    <span class="k">if</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span> <span class="o">+</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span> <span class="o">+</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">739</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You must select at least one camera.&quot;</span><span class="p">)</span>
<span class="linenos">740</span>    <span class="k">if</span> <span class="p">(</span>
<span class="linenos">741</span>        <span class="p">(</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">742</span>        <span class="ow">or</span> <span class="p">(</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">743</span>        <span class="ow">or</span> <span class="p">(</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">744</span>    <span class="p">):</span>
<span class="linenos">745</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[WARNING]: You have elected to use more than one camera type.&quot;</span><span class="p">)</span>
<span class="linenos">746</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[WARNING]: For a benchmark to be meaningful, use ONLY ONE camera type at a time.&quot;</span><span class="p">)</span>
<span class="linenos">747</span>        <span class="nb">print</span><span class="p">(</span>
<span class="linenos">748</span>            <span class="s2">&quot;[WARNING]: For example, if num_tiled_cameras=100, for a meaningful benchmark,&quot;</span>
<span class="linenos">749</span>            <span class="s2">&quot;num_standard_cameras should be 0, and num_ray_caster_cameras should be 0&quot;</span>
<span class="linenos">750</span>        <span class="p">)</span>
<span class="linenos">751</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Benchmark one camera at a time.&quot;</span><span class="p">)</span>
<span class="linenos">752</span>
<span class="linenos">753</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[INFO]: Designing the scene&quot;</span><span class="p">)</span>
<span class="linenos">754</span>    <span class="k">if</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">755</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[INFO]: No task environment provided, creating random scene.&quot;</span><span class="p">)</span>
<span class="linenos">756</span>        <span class="n">sim_cfg</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">SimulationCfg</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="linenos">757</span>        <span class="n">sim</span> <span class="o">=</span> <span class="n">sim_utils</span><span class="o">.</span><span class="n">SimulationContext</span><span class="p">(</span><span class="n">sim_cfg</span><span class="p">)</span>
<span class="linenos">758</span>        <span class="c1"># Set main camera</span>
<span class="linenos">759</span>        <span class="n">sim</span><span class="o">.</span><span class="n">set_camera_view</span><span class="p">([</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="linenos">760</span>        <span class="n">scene_entities</span> <span class="o">=</span> <span class="n">design_scene</span><span class="p">(</span>
<span class="linenos">761</span>            <span class="n">num_tiled_cams</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span><span class="p">,</span>
<span class="linenos">762</span>            <span class="n">num_standard_cams</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span><span class="p">,</span>
<span class="linenos">763</span>            <span class="n">num_ray_caster_cams</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span><span class="p">,</span>
<span class="linenos">764</span>            <span class="n">tiled_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">tiled_camera_data_types</span><span class="p">,</span>
<span class="linenos">765</span>            <span class="n">standard_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">standard_camera_data_types</span><span class="p">,</span>
<span class="linenos">766</span>            <span class="n">ray_caster_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">ray_caster_camera_data_types</span><span class="p">,</span>
<span class="linenos">767</span>            <span class="n">height</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">768</span>            <span class="n">width</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">769</span>            <span class="n">num_objects</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_objects</span><span class="p">,</span>
<span class="linenos">770</span>            <span class="n">mesh_prim_paths</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">ray_caster_visible_mesh_prim_paths</span><span class="p">,</span>
<span class="linenos">771</span>        <span class="p">)</span>
<span class="linenos">772</span>        <span class="c1"># Play simulator</span>
<span class="linenos">773</span>        <span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="linenos">774</span>        <span class="c1"># Now we are ready!</span>
<span class="linenos">775</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[INFO]: Setup complete...&quot;</span><span class="p">)</span>
<span class="linenos">776</span>        <span class="c1"># Run simulator</span>
<span class="linenos">777</span>        <span class="n">run_simulator</span><span class="p">(</span>
<span class="linenos">778</span>            <span class="n">sim</span><span class="o">=</span><span class="n">sim</span><span class="p">,</span>
<span class="linenos">779</span>            <span class="n">scene_entities</span><span class="o">=</span><span class="n">scene_entities</span><span class="p">,</span>
<span class="linenos">780</span>            <span class="n">warm_start_length</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">warm_start_length</span><span class="p">,</span>
<span class="linenos">781</span>            <span class="n">experiment_length</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">experiment_length</span><span class="p">,</span>
<span class="linenos">782</span>            <span class="n">tiled_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">tiled_camera_data_types</span><span class="p">,</span>
<span class="linenos">783</span>            <span class="n">standard_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">standard_camera_data_types</span><span class="p">,</span>
<span class="linenos">784</span>            <span class="n">ray_caster_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">ray_caster_camera_data_types</span><span class="p">,</span>
<span class="linenos">785</span>            <span class="n">convert_depth_to_camera_to_image_plane</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">convert_depth_to_camera_to_image_plane</span><span class="p">,</span>
<span class="linenos">786</span>        <span class="p">)</span>
<span class="linenos">787</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">788</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[INFO]: Using known task environment, injecting cameras.&quot;</span><span class="p">)</span>
<span class="linenos">789</span>        <span class="n">autotune_iter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">790</span>        <span class="n">max_sys_util_thresh</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
<span class="linenos">791</span>        <span class="n">max_num_cams</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span><span class="p">,</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span><span class="p">,</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span><span class="p">)</span>
<span class="linenos">792</span>        <span class="n">cur_num_cams</span> <span class="o">=</span> <span class="n">max_num_cams</span>
<span class="linenos">793</span>        <span class="n">cur_sys_util</span> <span class="o">=</span> <span class="n">max_sys_util_thresh</span>
<span class="linenos">794</span>        <span class="n">interval</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune_camera_count_interval</span>
<span class="linenos">795</span>
<span class="linenos">796</span>        <span class="k">if</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune</span><span class="p">:</span>
<span class="linenos">797</span>            <span class="n">max_sys_util_thresh</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune_max_percentage_util</span>
<span class="linenos">798</span>            <span class="n">max_num_cams</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune_max_camera_count</span>
<span class="linenos">799</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[INFO]: Auto tuning until any of the following threshold are met&quot;</span><span class="p">)</span>
<span class="linenos">800</span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;|CPU: </span><span class="si">{</span><span class="n">max_sys_util_thresh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">% | RAM </span><span class="si">{</span><span class="n">max_sys_util_thresh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">% | GPU: </span><span class="si">{</span><span class="n">max_sys_util_thresh</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">% |&quot;</span><span class="p">)</span>
<span class="linenos">801</span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[INFO]: Maximum number of cameras allowed: </span><span class="si">{</span><span class="n">max_num_cams</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">802</span>        <span class="c1"># Determine which camera is being tested...</span>
<span class="linenos">803</span>        <span class="n">tiled_camera_cfg</span> <span class="o">=</span> <span class="n">create_tiled_camera_cfg</span><span class="p">(</span><span class="s2">&quot;tiled_camera&quot;</span><span class="p">)</span>
<span class="linenos">804</span>        <span class="n">standard_camera_cfg</span> <span class="o">=</span> <span class="n">create_standard_camera_cfg</span><span class="p">(</span><span class="s2">&quot;standard_camera&quot;</span><span class="p">)</span>
<span class="linenos">805</span>        <span class="n">ray_caster_camera_cfg</span> <span class="o">=</span> <span class="n">create_ray_caster_camera_cfg</span><span class="p">(</span><span class="s2">&quot;ray_caster_camera&quot;</span><span class="p">)</span>
<span class="linenos">806</span>        <span class="n">camera_name_prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">807</span>        <span class="n">camera_creation_callable</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">808</span>        <span class="n">num_cams</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">809</span>        <span class="k">if</span> <span class="n">tiled_camera_cfg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">810</span>            <span class="n">camera_name_prefix</span> <span class="o">=</span> <span class="s2">&quot;tiled_camera&quot;</span>
<span class="linenos">811</span>            <span class="n">camera_creation_callable</span> <span class="o">=</span> <span class="n">create_tiled_camera_cfg</span>
<span class="linenos">812</span>            <span class="n">num_cams</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_tiled_cameras</span>
<span class="linenos">813</span>        <span class="k">elif</span> <span class="n">standard_camera_cfg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">814</span>            <span class="n">camera_name_prefix</span> <span class="o">=</span> <span class="s2">&quot;standard_camera&quot;</span>
<span class="linenos">815</span>            <span class="n">camera_creation_callable</span> <span class="o">=</span> <span class="n">create_standard_camera_cfg</span>
<span class="linenos">816</span>            <span class="n">num_cams</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_standard_cameras</span>
<span class="linenos">817</span>        <span class="k">elif</span> <span class="n">ray_caster_camera_cfg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">818</span>            <span class="n">camera_name_prefix</span> <span class="o">=</span> <span class="s2">&quot;ray_caster_camera&quot;</span>
<span class="linenos">819</span>            <span class="n">camera_creation_callable</span> <span class="o">=</span> <span class="n">create_ray_caster_camera_cfg</span>
<span class="linenos">820</span>            <span class="n">num_cams</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">num_ray_caster_cameras</span>
<span class="linenos">821</span>
<span class="linenos">822</span>        <span class="k">while</span> <span class="p">(</span>
<span class="linenos">823</span>            <span class="nb">all</span><span class="p">(</span><span class="n">cur</span> <span class="o">&lt;=</span> <span class="n">max_thresh</span> <span class="k">for</span> <span class="n">cur</span><span class="p">,</span> <span class="n">max_thresh</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cur_sys_util</span><span class="p">,</span> <span class="n">max_sys_util_thresh</span><span class="p">))</span>
<span class="linenos">824</span>            <span class="ow">and</span> <span class="n">cur_num_cams</span> <span class="o">&lt;=</span> <span class="n">max_num_cams</span>
<span class="linenos">825</span>        <span class="p">):</span>
<span class="linenos">826</span>            <span class="n">cur_num_cams</span> <span class="o">=</span> <span class="n">num_cams</span> <span class="o">+</span> <span class="n">interval</span> <span class="o">*</span> <span class="n">autotune_iter</span>
<span class="linenos">827</span>            <span class="n">autotune_iter</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">828</span>
<span class="linenos">829</span>            <span class="n">env</span> <span class="o">=</span> <span class="n">inject_cameras_into_task</span><span class="p">(</span>
<span class="linenos">830</span>                <span class="n">task</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">task</span><span class="p">,</span>
<span class="linenos">831</span>                <span class="n">num_cams</span><span class="o">=</span><span class="n">cur_num_cams</span><span class="p">,</span>
<span class="linenos">832</span>                <span class="n">camera_name_prefix</span><span class="o">=</span><span class="n">camera_name_prefix</span><span class="p">,</span>
<span class="linenos">833</span>                <span class="n">camera_creation_callable</span><span class="o">=</span><span class="n">camera_creation_callable</span><span class="p">,</span>
<span class="linenos">834</span>                <span class="n">num_cameras_per_env</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">task_num_cameras_per_env</span><span class="p">,</span>
<span class="linenos">835</span>            <span class="p">)</span>
<span class="linenos">836</span>            <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="linenos">837</span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Testing with </span><span class="si">{</span><span class="n">cur_num_cams</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">camera_name_prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">838</span>            <span class="n">analysis</span> <span class="o">=</span> <span class="n">run_simulator</span><span class="p">(</span>
<span class="linenos">839</span>                <span class="n">sim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="linenos">840</span>                <span class="n">scene_entities</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">scene</span><span class="p">,</span>
<span class="linenos">841</span>                <span class="n">warm_start_length</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">warm_start_length</span><span class="p">,</span>
<span class="linenos">842</span>                <span class="n">experiment_length</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">experiment_length</span><span class="p">,</span>
<span class="linenos">843</span>                <span class="n">tiled_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">tiled_camera_data_types</span><span class="p">,</span>
<span class="linenos">844</span>                <span class="n">standard_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">standard_camera_data_types</span><span class="p">,</span>
<span class="linenos">845</span>                <span class="n">ray_caster_camera_data_types</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">ray_caster_camera_data_types</span><span class="p">,</span>
<span class="linenos">846</span>                <span class="n">convert_depth_to_camera_to_image_plane</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">convert_depth_to_camera_to_image_plane</span><span class="p">,</span>
<span class="linenos">847</span>                <span class="n">max_cameras_per_env</span><span class="o">=</span><span class="n">args_cli</span><span class="o">.</span><span class="n">task_num_cameras_per_env</span><span class="p">,</span>
<span class="linenos">848</span>                <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
<span class="linenos">849</span>            <span class="p">)</span>
<span class="linenos">850</span>
<span class="linenos">851</span>            <span class="n">cur_sys_util</span> <span class="o">=</span> <span class="n">analysis</span><span class="p">[</span><span class="s2">&quot;system_utilization_analytics&quot;</span><span class="p">]</span>
<span class="linenos">852</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Triggering reset...&quot;</span><span class="p">)</span>
<span class="linenos">853</span>            <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">854</span>            <span class="n">create_new_stage</span><span class="p">()</span>
<span class="linenos">855</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[INFO]: DONE! Feel free to CTRL + C Me &quot;</span><span class="p">)</span>
<span class="linenos">856</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[INFO]: If you&#39;ve made it this far, you can likely simulate </span><span class="si">{</span><span class="n">cur_num_cams</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">camera_name_prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">857</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Keep in mind, this is without any training running on the GPU.&quot;</span><span class="p">)</span>
<span class="linenos">858</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Set lower utilization thresholds to account for training.&quot;</span><span class="p">)</span>
<span class="linenos">859</span>
<span class="linenos">860</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">autotune</span><span class="p">:</span>
<span class="linenos">861</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[WARNING]: GPU Util Statistics only correct while autotuning, ignore above.&quot;</span><span class="p">)</span>
<span class="linenos">862</span>
<span class="linenos">863</span>
<span class="linenos">864</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">865</span>    <span class="c1"># run the main function</span>
<span class="linenos">866</span>    <span class="n">main</span><span class="p">()</span>
<span class="linenos">867</span>    <span class="c1"># close sim app</span>
<span class="linenos">868</span>    <span class="n">simulation_app</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details><section id="possible-parameters">
<h2>Possible Parameters<a class="headerlink" href="#possible-parameters" title="Permalink to this heading">#</a></h2>
<p>First, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./isaaclab.sh<span class="w"> </span>-p<span class="w"> </span>source/standalone/benchmarks/benchmark_cameras.py<span class="w"> </span>-h
</pre></div>
</div>
<p>to see all possible parameters you can vary with this utility.</p>
<p>See the command line parameters related to <code class="docutils literal notranslate"><span class="pre">autotune</span></code> for more information about
automatically determining maximum camera count.</p>
</section>
<section id="compare-performance-in-task-environments-and-automatically-determine-task-max-camera-count">
<h2>Compare Performance in Task Environments and Automatically Determine Task Max Camera Count<a class="headerlink" href="#compare-performance-in-task-environments-and-automatically-determine-task-max-camera-count" title="Permalink to this heading">#</a></h2>
<p>Currently, tiled cameras are the most performant camera that can handle multiple dynamic objects.</p>
<p>For example, to see how your system could handle 100 tiled cameras in
the cartpole environment, with 2 cameras per environment (so 50 environments total)
only in RGB mode, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./isaaclab.sh<span class="w"> </span>-p<span class="w"> </span>source/standalone/benchmarks/benchmark_cameras.py<span class="w"> </span><span class="se">\</span>
--task<span class="w"> </span>Isaac-Cartpole-v0<span class="w"> </span>--num_tiled_cameras<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="se">\</span>
--task_num_cameras_per_env<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
--tiled_camera_data_types<span class="w"> </span>rgb
</pre></div>
</div>
<p>If you have pynvml installed, (<code class="docutils literal notranslate"><span class="pre">./isaaclab.sh</span> <span class="pre">-p</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pynvml</span></code>), you can also
find the maximum number of cameras that you could run in the specified environment up to
a certain performance threshold (specified by max CPU utilization percent, max RAM utilization percent,
max GPU compute percent, and max GPU memory percent). For example, to find the maximum number of cameras
you can run with cartpole, you could run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./isaaclab.sh<span class="w"> </span>-p<span class="w"> </span>source/standalone/benchmarks/benchmark_cameras.py<span class="w"> </span><span class="se">\</span>
--task<span class="w"> </span>Isaac-Cartpole-v0<span class="w"> </span>--num_tiled_cameras<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="se">\</span>
--task_num_cameras_per_env<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
--tiled_camera_data_types<span class="w"> </span>rgb<span class="w"> </span>--autotune<span class="w"> </span><span class="se">\</span>
--autotune_max_percentage_util<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">50</span>
</pre></div>
</div>
<p>Autotune may lead to the program crashing, which means that it tried to run too many cameras at once.
However, the max percentage utilization parameter is meant to prevent this from happening.</p>
<p>The output of the benchmark doesn’t include the overhead of training the network, so consider
decreasing the maximum utilization percentages to account for this overhead. The final output camera
count is for all cameras, so to get the total number of environments, divide the output camera count
by the number of cameras per environment.</p>
</section>
<section id="compare-camera-type-and-performance-without-a-specified-task">
<h2>Compare Camera Type and Performance (Without a Specified Task)<a class="headerlink" href="#compare-camera-type-and-performance-without-a-specified-task" title="Permalink to this heading">#</a></h2>
<p>This tool can also asses performance without a task environment.
For example, to view 100 random objects with 2 standard cameras, one could run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./isaaclab.sh<span class="w"> </span>-p<span class="w"> </span>source/standalone/benchmarks/benchmark_cameras.py<span class="w"> </span><span class="se">\</span>
--height<span class="w"> </span><span class="m">100</span><span class="w"> </span>--width<span class="w"> </span><span class="m">100</span><span class="w"> </span>--num_standard_cameras<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
--standard_camera_data_types<span class="w"> </span>instance_segmentation_fast<span class="w"> </span>normals<span class="w"> </span>--num_objects<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="se">\</span>
--experiment_length<span class="w"> </span><span class="m">100</span>
</pre></div>
</div>
<p>If your system cannot handle this due to performance reasons, then the process will be killed.
It’s recommended to monitor CPU/RAM utilization and GPU utilization while running this script, to get
an idea of how many resources rendering the desired camera requires. In Ubuntu, you can use tools like <code class="docutils literal notranslate"><span class="pre">htop</span></code> and <code class="docutils literal notranslate"><span class="pre">nvtop</span></code>
to live monitor resources while running this script, and in Windows, you can use the Task Manager.</p>
<p>If your system has a hard time handling the desired cameras, you can try the following</p>
<blockquote>
<div><ul class="simple">
<li><p>Switch to headless mode (supply <code class="docutils literal notranslate"><span class="pre">--headless</span></code>)</p></li>
<li><p>Ensure you are using the GPU pipeline not CPU!</p></li>
<li><p>If you aren’t using Tiled Cameras, switch to Tiled Cameras</p></li>
<li><p>Decrease camera resolution</p></li>
<li><p>Decrease how many data_types there are for each camera.</p></li>
<li><p>Decrease the number of cameras</p></li>
<li><p>Decrease the number of objects in the scene</p></li>
</ul>
</div></blockquote>
<p>If your system is able to handle the amount of cameras, then the time statistics will be printed to the terminal.
After the simulations stops it can be closed with CTRL+C.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="save_camera_output.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Saving rendered images and 3D re-projection</p>
      </div>
    </a>
    <a class="right-next"
       href="draw_markers.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Creating Visualization Markers</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-parameters">Possible Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-performance-in-task-environments-and-automatically-determine-task-max-camera-count">Compare Performance in Task Environments and Automatically Determine Task Max Camera Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-camera-type-and-performance-without-a-specified-task">Compare Camera Type and Performance (Without a Specified Task)</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Isaac Lab Project Developers.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025, The Isaac Lab Project Developers..
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Feb 02, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>